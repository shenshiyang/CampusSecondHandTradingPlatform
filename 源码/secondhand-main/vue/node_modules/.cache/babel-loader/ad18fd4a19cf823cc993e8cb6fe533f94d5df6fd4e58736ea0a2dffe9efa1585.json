{"ast":null,"code":"export default {\n  name: 'Collect',\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      ids: []\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    /* ---------- 查询 ---------- */\n    async load(page = this.pageNum) {\n      this.pageNum = page;\n      const {\n        code,\n        data,\n        msg\n      } = await this.$request.get('/collect/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      });\n      if (code === '200') {\n        this.tableData = data.list;\n        this.total = data.total;\n      } else {\n        this.$message.error(msg);\n      }\n    },\n    /* ---------- 删除 ---------- */\n    del(id) {\n      this.$confirm('确定取消收藏吗？', '提示', {\n        type: 'warning'\n      }).then(() => this.$request.delete('/collect/delete/' + id)).then(({\n        code,\n        msg\n      }) => {\n        code === '200' ? (this.$message.success('操作成功'), this.load(1)) : this.$message.error(msg);\n      }).catch(() => {});\n    },\n    handleSelectionChange(rows) {\n      this.ids = rows.map(v => v.id);\n    },\n    delBatch() {\n      if (!this.ids.length) return this.$message.warning('请选择数据');\n      this.$confirm('确认批量取消收藏吗？', '提示', {\n        type: 'warning'\n      }).then(() => this.$request.delete('/collect/delete/batch', {\n        data: this.ids\n      })).then(({\n        code,\n        msg\n      }) => {\n        code === '200' ? (this.$message.success('操作成功'), this.load(1)) : this.$message.error(msg);\n      }).catch(() => {});\n    },\n    /* ---------- 分页 ---------- */\n    handleCurrentChange(page) {\n      this.load(page);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","ids","created","load","methods","page","code","msg","$request","get","params","list","$message","error","del","id","$confirm","type","then","delete","success","catch","handleSelectionChange","rows","map","v","delBatch","length","warning","handleCurrentChange"],"sources":["src/views/front/Collect.vue"],"sourcesContent":["<template>\n  <div class=\"collect-page\">\n    <!-- ▍批量操作 -->\n    <el-button\n      type=\"danger\"\n      plain\n      size=\"mini\"\n      class=\"mb10\"\n      @click=\"delBatch\"\n    >批量取消收藏</el-button>\n\n    <!-- ▍收藏列表 -->\n    <el-card shadow=\"never\">\n      <el-table\n        :data=\"tableData\"\n        stripe\n        border\n        highlight-current-row\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n\n        <el-table-column\n          prop=\"goodsName\"\n          label=\"商品名称\"\n          min-width=\"180\"\n          show-overflow-tooltip\n        />\n\n        <el-table-column label=\"商品图片\" width=\"90\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-image\n              v-if=\"row.goodsImg\"\n              :src=\"row.goodsImg\"\n              :preview-src-list=\"[row.goodsImg]\"\n              style=\"width:40px;height:40px;border-radius:4px\"\n            />\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"商品链接\" width=\"100\" align=\"center\">\n          <template #default=\"{ row }\">\n            <a\n              :href=\"`/front/goodsDetail?id=${row.fid}`\"\n              target=\"_blank\"\n            >查看</a>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"120\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              plain\n              @click=\"del(row.id)\"\n            >取消收藏</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- ▍分页 -->\n      <el-pagination\n        class=\"pager\"\n        background\n        :current-page=\"pageNum\"\n        :page-size=\"pageSize\"\n        :total=\"total\"\n        :page-sizes=\"[5, 10, 20]\"\n        layout=\"total, prev, pager, next\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Collect',\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      ids: []\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    /* ---------- 查询 ---------- */\n    async load(page = this.pageNum) {\n      this.pageNum = page\n      const { code, data, msg } = await this.$request.get('/collect/selectPage', {\n        params: { pageNum: this.pageNum, pageSize: this.pageSize }\n      })\n      if (code === '200') {\n        this.tableData = data.list\n        this.total = data.total\n      } else {\n        this.$message.error(msg)\n      }\n    },\n\n    /* ---------- 删除 ---------- */\n    del(id) {\n      this.$confirm('确定取消收藏吗？', '提示', { type: 'warning' })\n        .then(() => this.$request.delete('/collect/delete/' + id))\n        .then(({ code, msg }) => {\n          code === '200' ? (this.$message.success('操作成功'), this.load(1)) : this.$message.error(msg)\n        })\n        .catch(() => {})\n    },\n    handleSelectionChange(rows) {\n      this.ids = rows.map(v => v.id)\n    },\n    delBatch() {\n      if (!this.ids.length) return this.$message.warning('请选择数据')\n      this.$confirm('确认批量取消收藏吗？', '提示', { type: 'warning' })\n        .then(() => this.$request.delete('/collect/delete/batch', { data: this.ids }))\n        .then(({ code, msg }) => {\n          code === '200' ? (this.$message.success('操作成功'), this.load(1)) : this.$message.error(msg)\n        })\n        .catch(() => {})\n    },\n\n    /* ---------- 分页 ---------- */\n    handleCurrentChange(page) {\n      this.load(page)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.collect-page {\n  width: 70%;\n  margin: 20px auto;\n}\n.mb10 {\n  margin-bottom: 10px;\n}\n.pager {\n  margin-top: 12px;\n  text-align: center;\n}\n</style>\n"],"mappings":"AA6EA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,GAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACA;IACA,MAAAD,KAAAE,IAAA,QAAAP,OAAA;MACA,KAAAA,OAAA,GAAAO,IAAA;MACA;QAAAC,IAAA;QAAAV,IAAA;QAAAW;MAAA,eAAAC,QAAA,CAAAC,GAAA;QACAC,MAAA;UAAAZ,OAAA,OAAAA,OAAA;UAAAC,QAAA,OAAAA;QAAA;MACA;MACA,IAAAO,IAAA;QACA,KAAAT,SAAA,GAAAD,IAAA,CAAAe,IAAA;QACA,KAAAX,KAAA,GAAAJ,IAAA,CAAAI,KAAA;MACA;QACA,KAAAY,QAAA,CAAAC,KAAA,CAAAN,GAAA;MACA;IACA;IAEA;IACAO,IAAAC,EAAA;MACA,KAAAC,QAAA;QAAAC,IAAA;MAAA,GACAC,IAAA,YAAAV,QAAA,CAAAW,MAAA,sBAAAJ,EAAA,GACAG,IAAA;QAAAZ,IAAA;QAAAC;MAAA;QACAD,IAAA,mBAAAM,QAAA,CAAAQ,OAAA,eAAAjB,IAAA,YAAAS,QAAA,CAAAC,KAAA,CAAAN,GAAA;MACA,GACAc,KAAA;IACA;IACAC,sBAAAC,IAAA;MACA,KAAAtB,GAAA,GAAAsB,IAAA,CAAAC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAV,EAAA;IACA;IACAW,SAAA;MACA,UAAAzB,GAAA,CAAA0B,MAAA,cAAAf,QAAA,CAAAgB,OAAA;MACA,KAAAZ,QAAA;QAAAC,IAAA;MAAA,GACAC,IAAA,YAAAV,QAAA,CAAAW,MAAA;QAAAvB,IAAA,OAAAK;MAAA,IACAiB,IAAA;QAAAZ,IAAA;QAAAC;MAAA;QACAD,IAAA,mBAAAM,QAAA,CAAAQ,OAAA,eAAAjB,IAAA,YAAAS,QAAA,CAAAC,KAAA,CAAAN,GAAA;MACA,GACAc,KAAA;IACA;IAEA;IACAQ,oBAAAxB,IAAA;MACA,KAAAF,IAAA,CAAAE,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}