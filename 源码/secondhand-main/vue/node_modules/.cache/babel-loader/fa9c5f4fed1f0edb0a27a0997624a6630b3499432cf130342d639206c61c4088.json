{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"FrontGoods\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      stockDialogVisible: false,\n      currentRow: null,\n      tempStock: 0\n    };\n  },\n  created() {\n    this.load(1);\n  },\n  methods: {\n    handleEdit(row) {\n      this.$router.push('/front/addGoods?id=' + row.id);\n    },\n    del(id) {\n      this.$confirm('您确定删除该商品吗？', '确认操作', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete('/goods/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.load(1);\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(() => {});\n    },\n    toggleStatus(row) {\n      const newStatus = row.saleStatus === '上架' ? '下架' : '上架';\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: newStatus\n      }).then(res => {\n        if (res.code === '200') {\n          row.saleStatus = newStatus;\n          this.$message.success(`已${newStatus}`);\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    openStockDialog(row) {\n      this.currentRow = row;\n      this.tempStock = row.stock;\n      this.stockDialogVisible = true;\n    },\n    confirmUpdateStock() {\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: this.currentRow.id,\n        stock: this.tempStock,\n        saleStatus: this.currentRow.saleStatus\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"库存已更新\");\n          this.currentRow.stock = this.tempStock;\n          this.stockDialogVisible = false;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/goods/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data?.list || [];\n          this.total = res.data?.total;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","stockDialogVisible","currentRow","tempStock","created","load","methods","handleEdit","row","$router","push","id","del","$confirm","type","then","$request","delete","res","code","$message","success","error","msg","catch","toggleStatus","newStatus","saleStatus","post","stock","openStockDialog","confirmUpdateStock","get","params","list","handleCurrentChange"],"sources":["src/views/front/Goods.vue"],"sourcesContent":["<template>\n  <div class=\"goods-container\">\n    <el-card class=\"card-box\">\n      <el-table\n        :data=\"tableData\"\n        stripe\n        border\n        empty-text=\"暂无商品数据\"\n        highlight-current-row\n        style=\"width: 100%; table-layout: fixed\"\n      >\n        <!-- 商品名称：居中 + 均分 -->\n        <el-table-column prop=\"name\" label=\"名称\" align=\"center\" show-overflow-tooltip />\n\n        <!-- 固定列 -->\n        <el-table-column prop=\"price\" label=\"价格\" width=\"100\" align=\"center\">\n          <template v-slot=\"scope\">\n            <span style=\"color: red; font-weight: bold\">￥{{ scope.row.price }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"库存\" width=\"100\" align=\"center\">\n          <template v-slot=\"scope\">\n            <span>{{ scope.row.stock }} 件</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"saleStatus\" label=\"上架状态\" width=\"100\" align=\"center\">\n          <template v-slot=\"scope\">\n            <el-tag :type=\"scope.row.saleStatus === '上架' ? 'success' : 'info'\">\n              {{ scope.row.saleStatus }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"readCount\" label=\"浏览量\" width=\"100\" align=\"center\" />\n\n        <!-- 操作列：居中 + 均分 -->\n        <el-table-column label=\"操作\" align=\"center\">\n          <template v-slot=\"scope\">\n            <div class=\"btn-group\">\n              <el-tooltip content=\"编辑商品\" placement=\"top\">\n                <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleEdit(scope.row)\" />\n              </el-tooltip>\n              <el-tooltip content=\"删除商品\" placement=\"top\">\n                <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"del(scope.row.id)\" />\n              </el-tooltip>\n              <el-tooltip content=\"修改库存\" placement=\"top\">\n                <el-button size=\"mini\" icon=\"el-icon-s-operation\" @click=\"openStockDialog(scope.row)\" />\n              </el-tooltip>\n              <el-tooltip :content=\"scope.row.saleStatus === '上架' ? '点击下架' : '点击上架'\" placement=\"top\">\n                <el-button\n                  size=\"mini\"\n                  :type=\"scope.row.saleStatus === '上架' ? 'warning' : 'success'\"\n                  @click=\"toggleStatus(scope.row)\"\n                >\n                  {{ scope.row.saleStatus === '上架' ? '下架' : '上架' }}\n                </el-button>\n              </el-tooltip>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"pagination-bar\">\n        <el-pagination\n          background\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pageNum\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"total\"\n        />\n      </div>\n    </el-card>\n\n    <!-- 修改库存弹窗 -->\n    <el-dialog\n      title=\"修改库存\"\n      :visible.sync=\"stockDialogVisible\"\n      width=\"400px\"\n      :close-on-click-modal=\"false\"\n    >\n      <div style=\"margin-bottom: 20px\">\n        <el-input-number v-model=\"tempStock\" :min=\"0\" controls-position=\"right\" style=\"width: 100%\" />\n      </div>\n      <div style=\"text-align: right\">\n        <el-button @click=\"stockDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmUpdateStock\">确认修改</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FrontGoods\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      stockDialogVisible: false,\n      currentRow: null,\n      tempStock: 0,\n    }\n  },\n  created() {\n    this.load(1)\n  },\n  methods: {\n    handleEdit(row) {\n      this.$router.push('/front/addGoods?id=' + row.id)\n    },\n    del(id) {\n      this.$confirm('您确定删除该商品吗？', '确认操作', { type: 'warning' }).then(() => {\n        this.$request.delete('/goods/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功')\n            this.load(1)\n          } else {\n            this.$message.error(res.msg)\n          }\n        })\n      }).catch(() => {})\n    },\n    toggleStatus(row) {\n      const newStatus = row.saleStatus === '上架' ? '下架' : '上架'\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: newStatus\n      }).then(res => {\n        if (res.code === '200') {\n          row.saleStatus = newStatus\n          this.$message.success(`已${newStatus}`)\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    openStockDialog(row) {\n      this.currentRow = row\n      this.tempStock = row.stock\n      this.stockDialogVisible = true\n    },\n    confirmUpdateStock() {\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: this.currentRow.id,\n        stock: this.tempStock,\n        saleStatus: this.currentRow.saleStatus\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"库存已更新\")\n          this.currentRow.stock = this.tempStock\n          this.stockDialogVisible = false\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum\n      this.$request.get('/goods/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data?.list || []\n          this.total = res.data?.total\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.goods-container {\n  width: 90%;\n  margin: 30px auto;\n}\n.card-box {\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n}\n.pagination-bar {\n  margin-top: 20px;\n  text-align: center;\n}\n.btn-group {\n  display: flex;\n  gap: 8px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n</style>\n"],"mappings":";AA+FA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,kBAAA;MACAC,UAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,WAAAC,GAAA;MACA,KAAAC,OAAA,CAAAC,IAAA,yBAAAF,GAAA,CAAAG,EAAA;IACA;IACAC,IAAAD,EAAA;MACA,KAAAE,QAAA;QAAAC,IAAA;MAAA,GAAAC,IAAA;QACA,KAAAC,QAAA,CAAAC,MAAA,oBAAAN,EAAA,EAAAI,IAAA,CAAAG,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAhB,IAAA;UACA;YACA,KAAAe,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;UACA;QACA;MACA,GAAAC,KAAA;IACA;IACAC,aAAAjB,GAAA;MACA,MAAAkB,SAAA,GAAAlB,GAAA,CAAAmB,UAAA;MACA,KAAAX,QAAA,CAAAY,IAAA;QACAjB,EAAA,EAAAH,GAAA,CAAAG,EAAA;QACAkB,KAAA,EAAArB,GAAA,CAAAqB,KAAA;QACAF,UAAA,EAAAD;MACA,GAAAX,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAX,GAAA,CAAAmB,UAAA,GAAAD,SAAA;UACA,KAAAN,QAAA,CAAAC,OAAA,KAAAK,SAAA;QACA;UACA,KAAAN,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAO,gBAAAtB,GAAA;MACA,KAAAN,UAAA,GAAAM,GAAA;MACA,KAAAL,SAAA,GAAAK,GAAA,CAAAqB,KAAA;MACA,KAAA5B,kBAAA;IACA;IACA8B,mBAAA;MACA,KAAAf,QAAA,CAAAY,IAAA;QACAjB,EAAA,OAAAT,UAAA,CAAAS,EAAA;QACAkB,KAAA,OAAA1B,SAAA;QACAwB,UAAA,OAAAzB,UAAA,CAAAyB;MACA,GAAAZ,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAnB,UAAA,CAAA2B,KAAA,QAAA1B,SAAA;UACA,KAAAF,kBAAA;QACA;UACA,KAAAmB,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAlB,KAAAP,OAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAkB,QAAA,CAAAgB,GAAA;QACAC,MAAA;UACAnC,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA;QACA;MACA,GAAAgB,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAtB,SAAA,GAAAqB,GAAA,CAAAtB,IAAA,EAAAsC,IAAA;UACA,KAAAlC,KAAA,GAAAkB,GAAA,CAAAtB,IAAA,EAAAI,KAAA;QACA;UACA,KAAAoB,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAY,oBAAArC,OAAA;MACA,KAAAO,IAAA,CAAAP,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}