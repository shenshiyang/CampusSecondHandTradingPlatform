{"ast":null,"code":"export default {\n  name: 'Search',\n  data() {\n    return {\n      goodsList: [],\n      pageNum: 1,\n      pageSize: 8,\n      total: 0,\n      name: this.$route.query.name || ''\n    };\n  },\n  created() {\n    this.loadGoods();\n  },\n  watch: {\n    // 当从其他页面携带 query 返回时自动刷新\n    '$route.query.name'(val) {\n      this.name = val || '';\n      this.loadGoods(1);\n    }\n  },\n  methods: {\n    async loadGoods(page = this.pageNum) {\n      this.pageNum = page;\n      const {\n        code,\n        data,\n        msg\n      } = await this.$request.get('/goods/selectFrontPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name\n        }\n      });\n      if (code === '200') {\n        this.goodsList = data.list;\n        this.total = data.total;\n      } else {\n        this.$message.error(msg);\n      }\n    },\n    handleCurrentChange(page) {\n      this.loadGoods(page);\n    },\n    reset() {\n      this.$router.replace('/front/search'); // 清除 query\n      this.name = '';\n      this.loadGoods(1);\n    }\n  }\n};","map":{"version":3,"names":["name","data","goodsList","pageNum","pageSize","total","$route","query","created","loadGoods","watch","$route.query.name","val","methods","page","code","msg","$request","get","params","list","$message","error","handleCurrentChange","reset","$router","replace"],"sources":["src/views/front/Search.vue"],"sourcesContent":["<template>\n  <div class=\"search-page\">\n    <!-- ▍搜索栏 -->\n    <div class=\"search-bar\">\n      <el-input\n        v-model.trim=\"name\"\n        placeholder=\"请输入商品关键字\"\n        clearable\n        class=\"search-input\"\n        @keyup.enter.native=\"loadGoods(1)\"\n      />\n      <el-button type=\"primary\" size=\"mini\" @click=\"loadGoods(1)\">搜索</el-button>\n      <el-button type=\"warning\" size=\"mini\" @click=\"reset\">重置</el-button>\n    </div>\n\n    <!-- ▍结果列表 -->\n    <el-card shadow=\"never\">\n      <el-row :gutter=\"15\">\n        <el-col\n          v-for=\"g in goodsList\"\n          :key=\"g.id\"\n          :span=\"6\"\n        >\n          <div\n            class=\"goods-item\"\n            @click=\"$router.push(`/front/goodsDetail?id=${g.id}`)\"\n          >\n            <el-image\n              :src=\"g.img\"\n              class=\"goods-img\"\n              fit=\"cover\"\n              :preview-src-list=\"[g.img]\"\n            />\n            <p class=\"goods-name line2\">{{ g.name }}</p>\n            <div class=\"goods-meta\">\n              <strong class=\"price\">￥{{ g.price }}</strong>\n              <span>{{ g.readCount }} 浏览</span>\n              <span>{{ g.likesCount }} 点赞</span>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n\n      <!-- ▍分页 -->\n      <el-pagination\n        v-if=\"total\"\n        class=\"pager\"\n        background\n        layout=\"total, prev, pager, next\"\n        :current-page=\"pageNum\"\n        :page-size=\"pageSize\"\n        :total=\"total\"\n        :page-sizes=\"[8, 16, 24]\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Search',\n  data() {\n    return {\n      goodsList: [],\n      pageNum: 1,\n      pageSize: 8,\n      total: 0,\n      name: this.$route.query.name || ''\n    }\n  },\n  created() {\n    this.loadGoods()\n  },\n  watch: {\n    // 当从其他页面携带 query 返回时自动刷新\n    '$route.query.name'(val) {\n      this.name = val || ''\n      this.loadGoods(1)\n    }\n  },\n  methods: {\n    async loadGoods(page = this.pageNum) {\n      this.pageNum = page\n      const { code, data, msg } = await this.$request.get('/goods/selectFrontPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name\n        }\n      })\n      if (code === '200') {\n        this.goodsList = data.list\n        this.total = data.total\n      } else {\n        this.$message.error(msg)\n      }\n    },\n    handleCurrentChange(page) {\n      this.loadGoods(page)\n    },\n    reset() {\n      this.$router.replace('/front/search') // 清除 query\n      this.name = ''\n      this.loadGoods(1)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.search-page {\n  width: 70%;\n  margin: 20px auto;\n}\n.search-bar {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.search-input {\n  width: 300px;\n  margin-right: 10px;\n}\n.goods-item {\n  cursor: pointer;\n  margin-bottom: 18px;\n  transition: transform 0.25s;\n}\n.goods-item:hover {\n  transform: translateY(-4px);\n}\n.goods-img {\n  width: 100%;\n  height: 240px;\n  border-radius: 4px;\n  margin-bottom: 8px;\n}\n.goods-name {\n  font-size: 15px;\n  color: #555;\n  margin-bottom: 6px;\n}\n.goods-meta {\n  font-size: 13px;\n  color: #666;\n  display: flex;\n  gap: 14px;\n  align-items: baseline;\n}\n.price {\n  color: #ff4d4f;\n  font-size: 18px;\n}\n.pager {\n  margin-top: 18px;\n  text-align: center;\n}\n.line2 {\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n</style>\n"],"mappings":"AA4DA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAL,IAAA,OAAAM,MAAA,CAAAC,KAAA,CAAAP,IAAA;IACA;EACA;EACAQ,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,KAAA;IACA;IACA,mBAAAC,CAAAC,GAAA;MACA,KAAAZ,IAAA,GAAAY,GAAA;MACA,KAAAH,SAAA;IACA;EACA;EACAI,OAAA;IACA,MAAAJ,UAAAK,IAAA,QAAAX,OAAA;MACA,KAAAA,OAAA,GAAAW,IAAA;MACA;QAAAC,IAAA;QAAAd,IAAA;QAAAe;MAAA,eAAAC,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAhB,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAJ,IAAA,OAAAA;QACA;MACA;MACA,IAAAe,IAAA;QACA,KAAAb,SAAA,GAAAD,IAAA,CAAAmB,IAAA;QACA,KAAAf,KAAA,GAAAJ,IAAA,CAAAI,KAAA;MACA;QACA,KAAAgB,QAAA,CAAAC,KAAA,CAAAN,GAAA;MACA;IACA;IACAO,oBAAAT,IAAA;MACA,KAAAL,SAAA,CAAAK,IAAA;IACA;IACAU,MAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;MACA,KAAA1B,IAAA;MACA,KAAAS,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}