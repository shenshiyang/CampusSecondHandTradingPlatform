{"ast":null,"code":"import dayjs from 'dayjs';\nexport default {\n  name: 'Notice',\n  data() {\n    return {\n      noticeList: [],\n      filteredNoticeList: [],\n      active: 0,\n      loading: false,\n      searchKeyword: '',\n      filterType: 'all'\n    };\n  },\n  created() {\n    this.fetchNotice();\n  },\n  methods: {\n    async fetchNotice() {\n      this.loading = true;\n      const {\n        code,\n        data,\n        msg\n      } = await this.$request.get('/notice/selectAll');\n      this.loading = false;\n      if (code === '200') {\n        this.noticeList = data || [];\n        this.handleFilterChange(this.filterType);\n      } else {\n        this.$message.error(msg);\n      }\n    },\n    // 格式化时间\n    formatTime(time) {\n      if (!time) return '';\n      return dayjs(time).format('YYYY-MM-DD HH:mm');\n    },\n    // 处理搜索\n    handleSearch() {\n      this.handleFilterChange(this.filterType);\n    },\n    // 处理筛选\n    handleFilterChange(type) {\n      let filtered = [...this.noticeList];\n\n      // 关键词搜索\n      if (this.searchKeyword) {\n        filtered = filtered.filter(item => item.title.toLowerCase().includes(this.searchKeyword.toLowerCase()) || item.content.toLowerCase().includes(this.searchKeyword.toLowerCase()));\n      }\n\n      // 时间筛选\n      const now = dayjs();\n      switch (type) {\n        case 'today':\n          filtered = filtered.filter(item => dayjs(item.time).isSame(now, 'day'));\n          break;\n        case 'week':\n          filtered = filtered.filter(item => dayjs(item.time).isAfter(now.subtract(7, 'day')));\n          break;\n        case 'month':\n          filtered = filtered.filter(item => dayjs(item.time).isAfter(now.subtract(1, 'month')));\n          break;\n      }\n      this.filteredNoticeList = filtered;\n    },\n    // 分享公告\n    shareNotice(notice) {\n      // 创建分享链接\n      const shareUrl = `${window.location.origin}${window.location.pathname}?notice=${notice.id}`;\n\n      // 复制链接到剪贴板\n      const textarea = document.createElement('textarea');\n      textarea.value = shareUrl;\n      document.body.appendChild(textarea);\n      textarea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textarea);\n      this.$message.success('分享链接已复制到剪贴板');\n    }\n  }\n};","map":{"version":3,"names":["dayjs","name","data","noticeList","filteredNoticeList","active","loading","searchKeyword","filterType","created","fetchNotice","methods","code","msg","$request","get","handleFilterChange","$message","error","formatTime","time","format","handleSearch","type","filtered","filter","item","title","toLowerCase","includes","content","now","isSame","isAfter","subtract","shareNotice","notice","shareUrl","window","location","origin","pathname","id","textarea","document","createElement","value","body","appendChild","select","execCommand","removeChild","success"],"sources":["src/views/front/Notice.vue"],"sourcesContent":["<template>\n  <div class=\"notice-page\">\n    <!-- ▍标题区域 -->\n    <div class=\"page-header\">\n      <h2 class=\"page-title\">\n        <i class=\"el-icon-message-solid\" /> 系统公告\n      </h2>\n      <div class=\"header-right\">\n        <el-input\n          v-model=\"searchKeyword\"\n          placeholder=\"搜索公告\"\n          prefix-icon=\"el-icon-search\"\n          clearable\n          @input=\"handleSearch\"\n          class=\"search-input\"\n        />\n        <el-radio-group v-model=\"filterType\" size=\"small\" @change=\"handleFilterChange\">\n          <el-radio-button label=\"all\">全部</el-radio-button>\n          <el-radio-button label=\"today\">今日</el-radio-button>\n          <el-radio-button label=\"week\">本周</el-radio-button>\n          <el-radio-button label=\"month\">本月</el-radio-button>\n        </el-radio-group>\n      </div>\n    </div>\n\n    <!-- ▍公告列表 -->\n    <el-card shadow=\"hover\" class=\"notice-card\">\n      <el-skeleton\n        v-if=\"loading\"\n        :rows=\"4\"\n        animated\n      />\n      <template v-else>\n        <!-- 无数据提示 -->\n        <el-empty\n          v-if=\"filteredNoticeList.length === 0\"\n          description=\"暂无公告\"\n        />\n        \n        <el-collapse\n          v-else\n          v-model=\"active\"\n          accordion\n        >\n          <el-collapse-item\n            v-for=\"(item, idx) in filteredNoticeList\"\n            :key=\"item.id\"\n            :name=\"idx\"\n          >\n            <!-- 标题插槽 -->\n            <template #title>\n              <div class=\"notice-header\">\n                <div class=\"notice-header-left\">\n                  <el-tag size=\"small\" type=\"primary\" effect=\"plain\" class=\"notice-tag\">公告</el-tag>\n                  <strong class=\"notice-title\">{{ item.title }}</strong>\n                </div>\n                <div class=\"notice-header-right\">\n                  <span class=\"notice-time\">\n                    <i class=\"el-icon-time\"></i>\n                    {{ formatTime(item.time) }}\n                  </span>\n                </div>\n              </div>\n            </template>\n\n            <!-- 内容 -->\n            <div class=\"notice-content-wrapper\">\n              <div\n                class=\"notice-content\"\n                v-html=\"item.content\"\n              />\n              <div class=\"notice-footer\">\n                <el-button \n                  type=\"text\" \n                  icon=\"el-icon-share\"\n                  @click.stop=\"shareNotice(item)\"\n                >分享</el-button>\n              </div>\n            </div>\n          </el-collapse-item>\n        </el-collapse>\n      </template>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\n\nexport default {\n  name: 'Notice',\n  data() {\n    return {\n      noticeList: [],\n      filteredNoticeList: [],\n      active: 0,\n      loading: false,\n      searchKeyword: '',\n      filterType: 'all'\n    }\n  },\n  created() {\n    this.fetchNotice()\n  },\n  methods: {\n    async fetchNotice() {\n      this.loading = true\n      const { code, data, msg } = await this.$request.get('/notice/selectAll')\n      this.loading = false\n      if (code === '200') {\n        this.noticeList = data || []\n        this.handleFilterChange(this.filterType)\n      } else {\n        this.$message.error(msg)\n      }\n    },\n    \n    // 格式化时间\n    formatTime(time) {\n      if (!time) return ''\n      return dayjs(time).format('YYYY-MM-DD HH:mm')\n    },\n    \n    // 处理搜索\n    handleSearch() {\n      this.handleFilterChange(this.filterType)\n    },\n    \n    // 处理筛选\n    handleFilterChange(type) {\n      let filtered = [...this.noticeList]\n      \n      // 关键词搜索\n      if (this.searchKeyword) {\n        filtered = filtered.filter(item => \n          item.title.toLowerCase().includes(this.searchKeyword.toLowerCase()) ||\n          item.content.toLowerCase().includes(this.searchKeyword.toLowerCase())\n        )\n      }\n      \n      // 时间筛选\n      const now = dayjs()\n      switch (type) {\n        case 'today':\n          filtered = filtered.filter(item => dayjs(item.time).isSame(now, 'day'))\n          break\n        case 'week':\n          filtered = filtered.filter(item => dayjs(item.time).isAfter(now.subtract(7, 'day')))\n          break\n        case 'month':\n          filtered = filtered.filter(item => dayjs(item.time).isAfter(now.subtract(1, 'month')))\n          break\n      }\n      \n      this.filteredNoticeList = filtered\n    },\n    \n    // 分享公告\n    shareNotice(notice) {\n      // 创建分享链接\n      const shareUrl = `${window.location.origin}${window.location.pathname}?notice=${notice.id}`\n      \n      // 复制链接到剪贴板\n      const textarea = document.createElement('textarea')\n      textarea.value = shareUrl\n      document.body.appendChild(textarea)\n      textarea.select()\n      document.execCommand('copy')\n      document.body.removeChild(textarea)\n      \n      this.$message.success('分享链接已复制到剪贴板')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.notice-page {\n  width: 80%;\n  max-width: 1000px;\n  margin: 30px auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.page-title {\n  border-left: 4px solid #2656b5;\n  padding-left: 16px;\n  font-size: 22px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin: 0;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.search-input {\n  width: 200px;\n}\n\n.notice-card {\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.notice-header {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.notice-header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.notice-tag {\n  font-size: 12px;\n}\n\n.notice-title {\n  font-size: 16px;\n  color: #303133;\n}\n\n.notice-time {\n  color: #909399;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.notice-content-wrapper {\n  padding: 16px 0;\n}\n\n.notice-content {\n  line-height: 1.8;\n  font-size: 14px;\n  color: #606266;\n  margin-bottom: 16px;\n}\n\n.notice-footer {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: 16px;\n  border-top: 1px solid #EBEEF5;\n}\n\n:deep(.el-collapse-item__header) {\n  font-size: inherit;\n  padding: 16px;\n}\n\n:deep(.el-collapse-item__content) {\n  padding: 0 16px 16px;\n}\n\n:deep(.el-collapse) {\n  border: none;\n}\n\n:deep(.el-collapse-item__wrap) {\n  border-bottom: 1px solid #EBEEF5;\n}\n\n:deep(.el-collapse-item:last-child .el-collapse-item__wrap) {\n  border-bottom: none;\n}\n</style>\n"],"mappings":"AAuFA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,kBAAA;MACAC,MAAA;MACAC,OAAA;MACAC,aAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA,MAAAD,YAAA;MACA,KAAAJ,OAAA;MACA;QAAAM,IAAA;QAAAV,IAAA;QAAAW;MAAA,eAAAC,QAAA,CAAAC,GAAA;MACA,KAAAT,OAAA;MACA,IAAAM,IAAA;QACA,KAAAT,UAAA,GAAAD,IAAA;QACA,KAAAc,kBAAA,MAAAR,UAAA;MACA;QACA,KAAAS,QAAA,CAAAC,KAAA,CAAAL,GAAA;MACA;IACA;IAEA;IACAM,WAAAC,IAAA;MACA,KAAAA,IAAA;MACA,OAAApB,KAAA,CAAAoB,IAAA,EAAAC,MAAA;IACA;IAEA;IACAC,aAAA;MACA,KAAAN,kBAAA,MAAAR,UAAA;IACA;IAEA;IACAQ,mBAAAO,IAAA;MACA,IAAAC,QAAA,YAAArB,UAAA;;MAEA;MACA,SAAAI,aAAA;QACAiB,QAAA,GAAAA,QAAA,CAAAC,MAAA,CAAAC,IAAA,IACAA,IAAA,CAAAC,KAAA,CAAAC,WAAA,GAAAC,QAAA,MAAAtB,aAAA,CAAAqB,WAAA,OACAF,IAAA,CAAAI,OAAA,CAAAF,WAAA,GAAAC,QAAA,MAAAtB,aAAA,CAAAqB,WAAA,GACA;MACA;;MAEA;MACA,MAAAG,GAAA,GAAA/B,KAAA;MACA,QAAAuB,IAAA;QACA;UACAC,QAAA,GAAAA,QAAA,CAAAC,MAAA,CAAAC,IAAA,IAAA1B,KAAA,CAAA0B,IAAA,CAAAN,IAAA,EAAAY,MAAA,CAAAD,GAAA;UACA;QACA;UACAP,QAAA,GAAAA,QAAA,CAAAC,MAAA,CAAAC,IAAA,IAAA1B,KAAA,CAAA0B,IAAA,CAAAN,IAAA,EAAAa,OAAA,CAAAF,GAAA,CAAAG,QAAA;UACA;QACA;UACAV,QAAA,GAAAA,QAAA,CAAAC,MAAA,CAAAC,IAAA,IAAA1B,KAAA,CAAA0B,IAAA,CAAAN,IAAA,EAAAa,OAAA,CAAAF,GAAA,CAAAG,QAAA;UACA;MACA;MAEA,KAAA9B,kBAAA,GAAAoB,QAAA;IACA;IAEA;IACAW,YAAAC,MAAA;MACA;MACA,MAAAC,QAAA,MAAAC,MAAA,CAAAC,QAAA,CAAAC,MAAA,GAAAF,MAAA,CAAAC,QAAA,CAAAE,QAAA,WAAAL,MAAA,CAAAM,EAAA;;MAEA;MACA,MAAAC,QAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,QAAA,CAAAG,KAAA,GAAAT,QAAA;MACAO,QAAA,CAAAG,IAAA,CAAAC,WAAA,CAAAL,QAAA;MACAA,QAAA,CAAAM,MAAA;MACAL,QAAA,CAAAM,WAAA;MACAN,QAAA,CAAAG,IAAA,CAAAI,WAAA,CAAAR,QAAA;MAEA,KAAA1B,QAAA,CAAAmC,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}