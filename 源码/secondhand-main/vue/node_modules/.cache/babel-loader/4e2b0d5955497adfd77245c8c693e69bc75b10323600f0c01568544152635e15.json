{"ast":null,"code":"import * as echarts from 'echarts';\nimport { ref, onMounted } from 'vue';\nimport request from '@/utils/request'; // 你项目里的 axios 封装\n\n// 最近 7 天\n\nexport default {\n  __name: 'Home',\n  setup(__props) {\n    const today = new Date();\n    const sevenAgo = new Date(Date.now() - 6 * 24 * 3600 * 1000);\n    const rangeLine = ref([sevenAgo, today]);\n    const rangeBar = ref([sevenAgo, today]);\n    const rangePie = ref([sevenAgo, today]);\n    const rangeOnline = ref([sevenAgo, today]);\n    let lineChart, barChart, pieChart, onlineChart;\n    onMounted(() => {\n      lineChart = echarts.init(document.getElementById('lineChart'));\n      barChart = echarts.init(document.getElementById('barChart'));\n      pieChart = echarts.init(document.getElementById('pieChart'));\n      onlineChart = echarts.init(document.getElementById('onlineChart'));\n      loadLine();\n      loadBar();\n      loadPie();\n      loadOnline();\n    });\n\n    /** ① 折线 */\n    function loadLine() {\n      const [start, end] = rangeLine.value;\n      request.get('/charts/sales-trend', {\n        params: {\n          startDate: start,\n          endDate: end\n        }\n      }).then(res => {\n        const data = res.data || [];\n        lineChart.setOption({\n          tooltip: {\n            trigger: 'axis'\n          },\n          legend: {\n            data: ['销售额', '订单数']\n          },\n          xAxis: {\n            type: 'category',\n            data: data.map(i => i.name)\n          },\n          yAxis: [{\n            type: 'value',\n            name: '销售额(元)',\n            position: 'left'\n          }, {\n            type: 'value',\n            name: '订单数(单)',\n            position: 'right'\n          }],\n          series: [{\n            name: '销售额',\n            type: 'line',\n            data: data.map(i => i.value1)\n          }, {\n            name: '订单数',\n            type: 'line',\n            yAxisIndex: 1,\n            data: data.map(i => i.value2)\n          }]\n        });\n      });\n    }\n\n    /** ② 柱状 */\n    function loadBar() {\n      const [start, end] = rangeBar.value;\n      request.get('/charts/seller-bar', {\n        params: {\n          startDate: start,\n          endDate: end\n        }\n      }).then(res => {\n        const data = res.data || [];\n        barChart.setOption({\n          tooltip: {},\n          xAxis: {\n            type: 'value'\n          },\n          yAxis: {\n            type: 'category',\n            data: data.map(i => i.name)\n          },\n          series: [{\n            type: 'bar',\n            data: data.map(i => i.value)\n          }]\n        });\n      });\n    }\n\n    /** ③ 饼图 */\n    function loadPie() {\n      const [start, end] = rangePie.value;\n      request.get('/charts/category-pie', {\n        params: {\n          startDate: start,\n          endDate: end\n        }\n      }).then(res => {\n        pieChart.setOption({\n          tooltip: {\n            trigger: 'item'\n          },\n          series: [{\n            type: 'pie',\n            radius: '65%',\n            data: res.data\n          }]\n        });\n      });\n    }\n\n    /** ④ 在线趋势 */\n    function loadOnline() {\n      const [start, end] = rangeOnline.value;\n      request.get('/charts/online-trend', {\n        params: {\n          startDate: start,\n          endDate: end\n        }\n      }).then(res => {\n        const data = res.data || [];\n        onlineChart.setOption({\n          tooltip: {\n            trigger: 'axis'\n          },\n          xAxis: {\n            type: 'category',\n            data: data.map(i => i.name)\n          },\n          yAxis: {\n            type: 'value',\n            name: '在线用户数'\n          },\n          series: [{\n            type: 'line',\n            data: data.map(i => i.value)\n          }]\n        });\n      });\n    }\n    return {\n      __sfc: true,\n      today,\n      sevenAgo,\n      rangeLine,\n      rangeBar,\n      rangePie,\n      rangeOnline,\n      lineChart,\n      barChart,\n      pieChart,\n      onlineChart,\n      loadLine,\n      loadBar,\n      loadPie,\n      loadOnline\n    };\n  }\n};","map":{"version":3,"names":["echarts","ref","onMounted","request","today","Date","sevenAgo","now","rangeLine","rangeBar","rangePie","rangeOnline","lineChart","barChart","pieChart","onlineChart","init","document","getElementById","loadLine","loadBar","loadPie","loadOnline","start","end","value","get","params","startDate","endDate","then","res","data","setOption","tooltip","trigger","legend","xAxis","type","map","i","name","yAxis","position","series","value1","yAxisIndex","value2","radius"],"sources":["Home.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n\n    <!-- ① 销售额 & 订单数折线 -->\n    <el-card>\n      <div style=\"display:flex;justify-content:space-between\">\n        <span>近 N 日销售额&订单数趋势</span>\n        <!-- ⚠️ 日期选择器 -->\n        <el-date-picker\n          v-model=\"rangeLine\"\n          type=\"daterange\"\n          size=\"small\"\n          format=\"YYYY-MM-DD\"\n          value-format=\"YYYY-MM-DD\"\n          @change=\"loadLine\" />\n      </div>\n      <div id=\"lineChart\" style=\"height:400px\"></div>\n    </el-card>\n\n    <el-row :gutter=\"20\" style=\"margin-top:20px\">\n      <!-- ② 商家销售额排行柱状 -->\n      <el-col :span=\"12\">\n        <el-card>\n          <div style=\"display:flex;justify-content:space-between\">\n            <span>商家销售额排行榜</span>\n            <el-date-picker\n              v-model=\"rangeBar\"\n              type=\"daterange\"\n              size=\"small\"\n              format=\"YYYY-MM-DD\"\n              value-format=\"YYYY-MM-DD\"\n              @change=\"loadBar\" />\n          </div>\n          <div id=\"barChart\" style=\"height:400px\"></div>\n        </el-card>\n      </el-col>\n\n      <!-- ③ 分类销量占比饼图 -->\n      <el-col :span=\"12\">\n        <el-card>\n          <div style=\"display:flex;justify-content:space-between\">\n            <span>商品种类销量占比</span>\n            <el-date-picker\n              v-model=\"rangePie\"\n              type=\"daterange\"\n              size=\"small\"\n              format=\"YYYY-MM-DD\"\n              value-format=\"YYYY-MM-DD\"\n              @change=\"loadPie\" />\n          </div>\n          <div id=\"pieChart\" style=\"height:400px\"></div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!-- ④ 用户在线趋势折线 -->\n    <el-card style=\"margin-top:20px\">\n      <div style=\"display:flex;justify-content:space-between\">\n        <span>近 N 日用户在线趋势</span>\n        <el-date-picker\n          v-model=\"rangeOnline\"\n          type=\"daterange\"\n          size=\"small\"\n          format=\"YYYY-MM-DD\"\n          value-format=\"YYYY-MM-DD\"\n          @change=\"loadOnline\" />\n      </div>\n      <div id=\"onlineChart\" style=\"height:400px\"></div>\n    </el-card>\n\n  </div>\n</template>\n\n<script setup>\nimport * as echarts from 'echarts'\nimport { ref, onMounted } from 'vue'\nimport request from '@/utils/request'   // 你项目里的 axios 封装\n\n// 最近 7 天\nconst today = new Date()\nconst sevenAgo = new Date(Date.now() - 6 * 24 * 3600 * 1000)\n\nconst rangeLine   = ref([sevenAgo, today])\nconst rangeBar    = ref([sevenAgo, today])\nconst rangePie    = ref([sevenAgo, today])\nconst rangeOnline = ref([sevenAgo, today])\n\nlet lineChart, barChart, pieChart, onlineChart\n\nonMounted(() => {\n  lineChart   = echarts.init(document.getElementById('lineChart'))\n  barChart    = echarts.init(document.getElementById('barChart'))\n  pieChart    = echarts.init(document.getElementById('pieChart'))\n  onlineChart = echarts.init(document.getElementById('onlineChart'))\n  loadLine(); loadBar(); loadPie(); loadOnline()\n})\n\n/** ① 折线 */\nfunction loadLine() {\n  const [start, end] = rangeLine.value\n  request.get('/charts/sales-trend', { params: { startDate: start, endDate: end } })\n    .then(res => {\n      const data = res.data || []\n      lineChart.setOption({\n        tooltip: { trigger: 'axis' },\n        legend: { data: ['销售额','订单数'] },\n        xAxis: { type: 'category', data: data.map(i => i.name) },\n        yAxis: [\n          { type:'value', name:'销售额(元)', position:'left' },\n          { type:'value', name:'订单数(单)', position:'right' }\n        ],\n        series: [\n          { name:'销售额', type:'line', data: data.map(i => i.value1) },\n          { name:'订单数', type:'line', yAxisIndex:1, data: data.map(i => i.value2) }\n        ]\n      })\n    })\n}\n\n/** ② 柱状 */\nfunction loadBar() {\n  const [start, end] = rangeBar.value\n  request.get('/charts/seller-bar', { params: { startDate: start, endDate: end } })\n    .then(res => {\n      const data = res.data || []\n      barChart.setOption({\n        tooltip:{},\n        xAxis:{ type:'value' },\n        yAxis:{ type:'category', data:data.map(i=>i.name) },\n        series:[{ type:'bar', data:data.map(i=>i.value) }]\n      })\n    })\n}\n\n/** ③ 饼图 */\nfunction loadPie() {\n  const [start, end] = rangePie.value\n  request.get('/charts/category-pie', { params: { startDate: start, endDate: end } })\n    .then(res => {\n      pieChart.setOption({\n        tooltip:{ trigger:'item' },\n        series:[{\n          type:'pie',\n          radius:'65%',\n          data: res.data\n        }]\n      })\n    })\n}\n\n/** ④ 在线趋势 */\nfunction loadOnline() {\n  const [start, end] = rangeOnline.value\n  request.get('/charts/online-trend', { params: { startDate: start, endDate: end } })\n    .then(res => {\n      const data = res.data || []\n      onlineChart.setOption({\n        tooltip:{ trigger:'axis' },\n        xAxis:{ type:'category', data:data.map(i=>i.name) },\n        yAxis:{ type:'value', name:'在线用户数' },\n        series:[{ type:'line', data:data.map(i=>i.value) }]\n      })\n    })\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}