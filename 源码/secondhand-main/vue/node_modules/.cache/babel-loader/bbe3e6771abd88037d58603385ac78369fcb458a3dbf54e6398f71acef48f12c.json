{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"FrontGoods\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      name: null,\n      content: '',\n      fromVisible1: false,\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}')\n    };\n  },\n  created() {\n    this.load(1);\n  },\n  methods: {\n    handleEdit(row) {\n      this.$router.push('/front/addGoods?id=' + row.id);\n    },\n    del(id) {\n      this.$confirm('您确定删除该商品吗？', '确认操作', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete('/goods/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.load(1);\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(() => {});\n    },\n    updateStock(row) {\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: row.saleStatus\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"库存已更新\");\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    toggleStatus(row) {\n      const newStatus = row.saleStatus === '上架' ? '下架' : '上架';\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: newStatus\n      }).then(res => {\n        if (res.code === '200') {\n          row.saleStatus = newStatus;\n          this.$message.success(`已${newStatus}`);\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/goods/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data?.list || [];\n          this.total = res.data?.total;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","content","fromVisible1","user","JSON","parse","localStorage","getItem","created","load","methods","handleEdit","row","$router","push","id","del","$confirm","type","then","$request","delete","res","code","$message","success","error","msg","catch","updateStock","post","stock","saleStatus","toggleStatus","newStatus","get","params","list","handleCurrentChange"],"sources":["src/views/front/Goods.vue"],"sourcesContent":["<template>\n  <div class=\"goods-container\">\n    <el-card class=\"card-box\">\n      <el-table\n        :data=\"tableData\"\n        stripe\n        border\n        style=\"width: 100%\"\n        empty-text=\"暂无商品数据\"\n        highlight-current-row\n      >\n        <el-table-column prop=\"name\" label=\"名称\" min-width=\"120\" show-overflow-tooltip />\n\n        <el-table-column prop=\"price\" label=\"价格\" width=\"100\">\n          <template v-slot=\"scope\">\n            <span style=\"color: red; font-weight: bold\">￥{{ scope.row.price }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"stock\" label=\"库存\" width=\"100\">\n          <template v-slot=\"scope\">\n            <el-input-number\n              v-model=\"scope.row.stock\"\n              size=\"mini\"\n              :min=\"0\"\n              :step=\"1\"\n              controls-position=\"right\"\n            />\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"saleStatus\" label=\"上架状态\" width=\"100\">\n          <template v-slot=\"scope\">\n            <el-tag :type=\"scope.row.saleStatus === '上架' ? 'success' : 'info'\">\n              {{ scope.row.saleStatus }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"readCount\" label=\"浏览量\" width=\"80\" />\n\n        <el-table-column label=\"操作\" align=\"center\" width=\"320\">\n          <template v-slot=\"scope\">\n            <el-button-group>\n              <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n              <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"del(scope.row.id)\">删除</el-button>\n              <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"updateStock(scope.row)\">更新库存</el-button>\n              <el-button\n                size=\"mini\"\n                :type=\"scope.row.saleStatus === '上架' ? 'warning' : 'success'\"\n                @click=\"toggleStatus(scope.row)\"\n              >\n                {{ scope.row.saleStatus === '上架' ? '下架' : '上架' }}\n              </el-button>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"pagination-bar\">\n        <el-pagination\n          background\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pageNum\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"total\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FrontGoods\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      name: null,\n      content: '',\n      fromVisible1: false,\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n    }\n  },\n  created() {\n    this.load(1)\n  },\n  methods: {\n    handleEdit(row) {\n      this.$router.push('/front/addGoods?id=' + row.id)\n    },\n    del(id) {\n      this.$confirm('您确定删除该商品吗？', '确认操作', { type: 'warning' }).then(() => {\n        this.$request.delete('/goods/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功')\n            this.load(1)\n          } else {\n            this.$message.error(res.msg)\n          }\n        })\n      }).catch(() => {})\n    },\n    updateStock(row) {\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: row.saleStatus\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"库存已更新\")\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    toggleStatus(row) {\n      const newStatus = row.saleStatus === '上架' ? '下架' : '上架'\n      this.$request.post('/goods/updateStockAndSaleStatus', {\n        id: row.id,\n        stock: row.stock,\n        saleStatus: newStatus\n      }).then(res => {\n        if (res.code === '200') {\n          row.saleStatus = newStatus\n          this.$message.success(`已${newStatus}`)\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum\n      this.$request.get('/goods/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name,\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data?.list || []\n          this.total = res.data?.total\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.goods-container {\n  width: 90%;\n  margin: 30px auto;\n}\n.card-box {\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n}\n.pagination-bar {\n  margin-top: 20px;\n  text-align: center;\n}\n</style>\n"],"mappings":";AA0EA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAL,IAAA;MACAM,OAAA;MACAC,YAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,WAAAC,GAAA;MACA,KAAAC,OAAA,CAAAC,IAAA,yBAAAF,GAAA,CAAAG,EAAA;IACA;IACAC,IAAAD,EAAA;MACA,KAAAE,QAAA;QAAAC,IAAA;MAAA,GAAAC,IAAA;QACA,KAAAC,QAAA,CAAAC,MAAA,oBAAAN,EAAA,EAAAI,IAAA,CAAAG,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAhB,IAAA;UACA;YACA,KAAAe,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;UACA;QACA;MACA,GAAAC,KAAA;IACA;IACAC,YAAAjB,GAAA;MACA,KAAAQ,QAAA,CAAAU,IAAA;QACAf,EAAA,EAAAH,GAAA,CAAAG,EAAA;QACAgB,KAAA,EAAAnB,GAAA,CAAAmB,KAAA;QACAC,UAAA,EAAApB,GAAA,CAAAoB;MACA,GAAAb,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAM,aAAArB,GAAA;MACA,MAAAsB,SAAA,GAAAtB,GAAA,CAAAoB,UAAA;MACA,KAAAZ,QAAA,CAAAU,IAAA;QACAf,EAAA,EAAAH,GAAA,CAAAG,EAAA;QACAgB,KAAA,EAAAnB,GAAA,CAAAmB,KAAA;QACAC,UAAA,EAAAE;MACA,GAAAf,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAX,GAAA,CAAAoB,UAAA,GAAAE,SAAA;UACA,KAAAV,QAAA,CAAAC,OAAA,KAAAS,SAAA;QACA;UACA,KAAAV,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAlB,KAAAX,OAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAsB,QAAA,CAAAe,GAAA;QACAC,MAAA;UACAtC,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAJ,IAAA,OAAAA;QACA;MACA,GAAAwB,IAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAA1B,SAAA,GAAAyB,GAAA,CAAA1B,IAAA,EAAAyC,IAAA;UACA,KAAArC,KAAA,GAAAsB,GAAA,CAAA1B,IAAA,EAAAI,KAAA;QACA;UACA,KAAAwB,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAW,oBAAAxC,OAAA;MACA,KAAAW,IAAA,CAAAX,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}