{"ast":null,"code":"export default {\n  name: 'Feedback',\n  data() {\n    const phoneReg = /^1\\d{10}$/;\n    const emailReg = /^[A-Za-z0-9]+([._%+-]?[A-Za-z0-9]+)*@[A-Za-z0-9-]+(\\.[A-Za-z]{2,})+$/;\n    return {\n      form: {},\n      btnLoading: false,\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入主题',\n          trigger: 'blur'\n        }],\n        content: [{\n          required: true,\n          message: '请输入内容',\n          trigger: 'blur'\n        }],\n        phone: [{\n          pattern: phoneReg,\n          message: '手机号格式不正确',\n          trigger: 'blur'\n        }],\n        email: [{\n          pattern: emailReg,\n          message: '邮箱格式不正确',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    async save() {\n      this.$refs.formRef.validate(async valid => {\n        if (!valid) return;\n        this.btnLoading = true;\n        const {\n          code,\n          msg\n        } = await this.$request.post('/feedback/add', this.form);\n        this.btnLoading = false;\n        if (code === '200') {\n          this.$message.success('提交成功');\n          this.form = {}; // 清空表单\n          this.$nextTick(() => this.$refs.formRef.clearValidate());\n        } else {\n          this.$message.error(msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","phoneReg","emailReg","form","btnLoading","rules","title","required","message","trigger","content","phone","pattern","email","methods","save","$refs","formRef","validate","valid","code","msg","$request","post","$message","success","$nextTick","clearValidate","error"],"sources":["src/views/front/Posts.vue"],"sourcesContent":["<template>\n  <el-card class=\"feedback-card\" shadow=\"never\">\n    <h2 class=\"title\">请填写反馈内容</h2>\n\n    <el-form\n      ref=\"formRef\"\n      :model=\"form\"\n      :rules=\"rules\"\n      label-width=\"80px\"\n      class=\"feedback-form\"\n    >\n      <el-form-item label=\"主题\" prop=\"title\">\n        <el-input\n          v-model.trim=\"form.title\"\n          maxlength=\"50\"\n          show-word-limit\n          placeholder=\"请输入主题\"\n          clearable\n        />\n      </el-form-item>\n\n      <el-form-item label=\"内容\" prop=\"content\">\n        <el-input\n          v-model.trim=\"form.content\"\n          type=\"textarea\"\n          :autosize=\"{ minRows: 4, maxRows: 6 }\"\n          maxlength=\"300\"\n          show-word-limit\n          placeholder=\"请输入内容\"\n          clearable\n        />\n      </el-form-item>\n\n      <el-form-item label=\"电话\" prop=\"phone\">\n        <el-input\n          v-model.trim=\"form.phone\"\n          maxlength=\"11\"\n          placeholder=\"请输入手机号\"\n          clearable\n        />\n      </el-form-item>\n\n      <el-form-item label=\"邮箱\" prop=\"email\">\n        <el-input\n          v-model.trim=\"form.email\"\n          placeholder=\"请输入邮箱\"\n          clearable\n        />\n      </el-form-item>\n\n      <div class=\"actions\">\n        <el-button\n          type=\"primary\"\n          :loading=\"btnLoading\"\n          @click=\"save\"\n        >提交反馈</el-button>\n      </div>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nexport default {\n  name: 'Feedback',\n  data() {\n    const phoneReg = /^1\\d{10}$/;\n    const emailReg =\n      /^[A-Za-z0-9]+([._%+-]?[A-Za-z0-9]+)*@[A-Za-z0-9-]+(\\.[A-Za-z]{2,})+$/;\n    return {\n      form: {},\n      btnLoading: false,\n      rules: {\n        title: [{ required: true, message: '请输入主题', trigger: 'blur' }],\n        content: [{ required: true, message: '请输入内容', trigger: 'blur' }],\n        phone: [{ pattern: phoneReg, message: '手机号格式不正确', trigger: 'blur' }],\n        email: [{ pattern: emailReg, message: '邮箱格式不正确', trigger: 'blur' }]\n      }\n    };\n  },\n  methods: {\n    async save() {\n      this.$refs.formRef.validate(async (valid) => {\n        if (!valid) return;\n        this.btnLoading = true;\n        const { code, msg } = await this.$request.post('/feedback/add', this.form);\n        this.btnLoading = false;\n\n        if (code === '200') {\n          this.$message.success('提交成功');\n          this.form = {}; // 清空表单\n          this.$nextTick(() => this.$refs.formRef.clearValidate());\n        } else {\n          this.$message.error(msg);\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.feedback-card {\n  width: 50%;\n  margin: 40px auto;\n  padding: 30px 40px;\n}\n.title {\n  text-align: center;\n  margin-bottom: 30px;\n  font-size: 20px;\n  font-weight: 600;\n}\n.feedback-form >>> .el-input__count {\n  line-height: 20px;\n}\n.actions {\n  text-align: center;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":"AA8DA;EACAA,IAAA;EACAC,KAAA;IACA,MAAAC,QAAA;IACA,MAAAC,QAAA,GACA;IACA;MACAC,IAAA;MACAC,UAAA;MACAC,KAAA;QACAC,KAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAC,OAAA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAE,KAAA;UAAAC,OAAA,EAAAX,QAAA;UAAAO,OAAA;UAAAC,OAAA;QAAA;QACAI,KAAA;UAAAD,OAAA,EAAAV,QAAA;UAAAM,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAK,OAAA;IACA,MAAAC,KAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,OAAAC,KAAA;QACA,KAAAA,KAAA;QACA,KAAAf,UAAA;QACA;UAAAgB,IAAA;UAAAC;QAAA,eAAAC,QAAA,CAAAC,IAAA,uBAAApB,IAAA;QACA,KAAAC,UAAA;QAEA,IAAAgB,IAAA;UACA,KAAAI,QAAA,CAAAC,OAAA;UACA,KAAAtB,IAAA;UACA,KAAAuB,SAAA,YAAAV,KAAA,CAAAC,OAAA,CAAAU,aAAA;QACA;UACA,KAAAH,QAAA,CAAAI,KAAA,CAAAP,GAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}