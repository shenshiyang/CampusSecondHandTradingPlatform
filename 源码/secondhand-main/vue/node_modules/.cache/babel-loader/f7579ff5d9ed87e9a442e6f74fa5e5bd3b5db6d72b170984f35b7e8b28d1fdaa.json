{"ast":null,"code":"import Comment from '@/components/Comment';\nexport default {\n  name: 'Help',\n  components: {\n    Comment\n  },\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      total: 0,\n      title: ''\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    /* ---------- 数据 ---------- */\n    async load(page = this.pageNum) {\n      this.pageNum = page;\n      const {\n        code,\n        data,\n        msg\n      } = await this.$request.get('/help/selectFrontPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          title: this.title\n        }\n      });\n      if (code === '200') {\n        this.tableData = (data.list || []).map(v => ({\n          ...v,\n          showComment: v.showComment ?? false\n        }));\n        this.total = data.total;\n      } else {\n        this.$message.error(msg);\n      }\n    },\n    /* ---------- 评论折叠 ---------- */\n    toggleComment(item) {\n      this.$set(item, 'showComment', !item.showComment);\n    },\n    /* ---------- 分页 ---------- */\n    handleCurrentChange(page) {\n      this.load(page);\n    }\n  }\n};","map":{"version":3,"names":["Comment","name","components","data","tableData","pageNum","pageSize","total","title","created","load","methods","page","code","msg","$request","get","params","list","map","v","showComment","$message","error","toggleComment","item","$set","handleCurrentChange"],"sources":["src/views/front/Help.vue"],"sourcesContent":["<template>\n  <div class=\"help-page\">\n    <!-- ▍查询栏 -->\n    <div class=\"search-bar\">\n      <el-input\n        v-model.trim=\"title\"\n        placeholder=\"请输入标题关键字查询\"\n        clearable\n        class=\"search-input\"\n        @keyup.enter.native=\"load(1)\"\n      />\n      <el-button type=\"primary\" size=\"mini\" @click=\"load(1)\">查询</el-button>\n    </div>\n\n    <!-- ▍求助列表 -->\n    <el-card\n      v-for=\"item in tableData\"\n      :key=\"item.id\"\n      class=\"help-card\"\n      shadow=\"never\"\n    >\n      <!-- 头部 -->\n      <header class=\"help-header\">\n        <img :src=\"item.avatar\" alt=\"用户头像\" class=\"avatar\" />\n        <div class=\"info\">\n          <div class=\"title\">\n            <strong>{{ item.title }}</strong>\n            <el-tag\n              size=\"mini\"\n              :type=\"item.solved === '未解决' ? 'danger' : 'success'\"\n            >\n              {{ item.solved }}\n            </el-tag>\n          </div>\n          <div class=\"meta\">\n            <span>{{ item.userName }}</span>\n            <span>{{ item.time }}</span>\n          </div>\n        </div>\n      </header>\n\n      <!-- 图片 -->\n      <el-image\n        v-if=\"item.img\"\n        :src=\"item.img\"\n        :preview-src-list=\"[item.img]\"\n        fit=\"cover\"\n        class=\"help-img\"\n      />\n\n      <!-- 内容 -->\n      <div\n        class=\"help-content\"\n        v-html=\"item.content\"\n      />\n\n      <!-- 评论按钮 -->\n      <el-button\n        size=\"mini\"\n        type=\"primary\"\n        plain\n        @click=\"toggleComment(item)\"\n      >\n        {{ item.showComment ? '收起评论' : '展开评论' }}\n      </el-button>\n\n      <!-- 评论区 -->\n      <transition name=\"fade\">\n        <div v-if=\"item.showComment\" class=\"comment-area\">\n          <Comment :fid=\"item.id\" module=\"help\" />\n        </div>\n      </transition>\n    </el-card>\n\n    <!-- ▍分页 -->\n    <el-pagination\n      v-if=\"total\"\n      class=\"pager\"\n      background\n      layout=\"total, prev, pager, next\"\n      :current-page=\"pageNum\"\n      :page-size=\"pageSize\"\n      :total=\"total\"\n      :page-sizes=\"[5, 10, 20]\"\n      @current-change=\"handleCurrentChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport Comment from '@/components/Comment'\nexport default {\n  name: 'Help',\n  components: { Comment },\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      total: 0,\n      title: ''\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    /* ---------- 数据 ---------- */\n    async load(page = this.pageNum) {\n      this.pageNum = page\n      const { code, data, msg } = await this.$request.get(\n        '/help/selectFrontPage',\n        {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            title: this.title\n          }\n        }\n      )\n      if (code === '200') {\n        this.tableData = (data.list || []).map((v) => ({\n          ...v,\n          showComment: v.showComment ?? false\n        }))\n        this.total = data.total\n      } else {\n        this.$message.error(msg)\n      }\n    },\n\n    /* ---------- 评论折叠 ---------- */\n    toggleComment(item) {\n      this.$set(item, 'showComment', !item.showComment)\n    },\n\n    /* ---------- 分页 ---------- */\n    handleCurrentChange(page) {\n      this.load(page)\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 容器 */\n.help-page {\n  width: 60%;\n  margin: 30px auto;\n}\n/* 查询栏 */\n.search-bar {\n  display: flex;\n  align-items: center;\n  margin-bottom: 18px;\n}\n.search-input {\n  width: 300px;\n  margin-right: 10px;\n}\n/* 卡片 */\n.help-card {\n  margin-bottom: 20px;\n  padding: 20px;\n}\n/* 头部 */\n.help-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.avatar {\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 14px;\n}\n.info {\n  flex: 1;\n}\n.title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n.meta {\n  color: #8c8c8c;\n  font-size: 13px;\n  display: flex;\n  gap: 18px;\n}\n/* 图片 */\n.help-img {\n  width: 100%;\n  max-width: 320px;\n  margin: 12px 0;\n  border-radius: 4px;\n}\n/* 内容 */\n.help-content {\n  font-size: 14px;\n  color: #444;\n  margin-bottom: 10px;\n}\n/* 评论 */\n.comment-area {\n  margin-top: 15px;\n  border-top: 1px dashed #e5e5e5;\n  padding-top: 15px;\n}\n/* 分页 */\n.pager {\n  margin-top: 26px;\n  text-align: center;\n}\n/* 动画 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n"],"mappings":"AA0FA,OAAAA,OAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACA;IACA,MAAAD,KAAAE,IAAA,QAAAP,OAAA;MACA,KAAAA,OAAA,GAAAO,IAAA;MACA;QAAAC,IAAA;QAAAV,IAAA;QAAAW;MAAA,eAAAC,QAAA,CAAAC,GAAA,CACA,yBACA;QACAC,MAAA;UACAZ,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAE,KAAA,OAAAA;QACA;MACA,CACA;MACA,IAAAK,IAAA;QACA,KAAAT,SAAA,IAAAD,IAAA,CAAAe,IAAA,QAAAC,GAAA,CAAAC,CAAA;UACA,GAAAA,CAAA;UACAC,WAAA,EAAAD,CAAA,CAAAC,WAAA;QACA;QACA,KAAAd,KAAA,GAAAJ,IAAA,CAAAI,KAAA;MACA;QACA,KAAAe,QAAA,CAAAC,KAAA,CAAAT,GAAA;MACA;IACA;IAEA;IACAU,cAAAC,IAAA;MACA,KAAAC,IAAA,CAAAD,IAAA,kBAAAA,IAAA,CAAAJ,WAAA;IACA;IAEA;IACAM,oBAAAf,IAAA;MACA,KAAAF,IAAA,CAAAE,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}