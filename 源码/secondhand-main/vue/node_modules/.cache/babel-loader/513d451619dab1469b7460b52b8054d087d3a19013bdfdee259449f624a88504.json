{"ast":null,"code":"export default {\n  name: 'Search',\n  data() {\n    return {\n      goodsList: [],\n      pageNum: 1,\n      pageSize: 8,\n      total: 0,\n      name: this.$route.query.name || ''\n    };\n  },\n  created() {\n    this.loadGoods();\n  },\n  watch: {\n    '$route.query.name'(val) {\n      this.name = val || '';\n      this.loadGoods(1);\n    }\n  },\n  methods: {\n    async loadGoods(page = this.pageNum) {\n      this.pageNum = page;\n      const {\n        code,\n        data,\n        msg\n      } = await this.$request.get('/goods/selectFrontPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name\n        }\n      });\n      if (code === '200') {\n        this.goodsList = data.list;\n        this.total = data.total;\n      } else {\n        this.$message.error(msg);\n      }\n    },\n    handleCurrentChange(page) {\n      this.loadGoods(page);\n    },\n    reset() {\n      this.$router.replace('/front/search');\n      this.name = '';\n      this.loadGoods(1);\n    }\n  }\n};","map":{"version":3,"names":["name","data","goodsList","pageNum","pageSize","total","$route","query","created","loadGoods","watch","$route.query.name","val","methods","page","code","msg","$request","get","params","list","$message","error","handleCurrentChange","reset","$router","replace"],"sources":["src/views/front/Search.vue"],"sourcesContent":["<template>\n  <div class=\"search-page\">\n    <!-- 搜索栏 -->\n    <el-card class=\"search-card\" shadow=\"hover\">\n      <div class=\"search-header\">\n        <h2 class=\"search-title\">\n          <i class=\"el-icon-search\"></i>\n          商品搜索\n        </h2>\n      </div>\n      \n      <div class=\"search-bar\">\n        <el-input\n          v-model.trim=\"name\"\n          placeholder=\"输入商品关键字搜索...\"\n          prefix-icon=\"el-icon-search\"\n          clearable\n          class=\"search-input\"\n          @keyup.enter.native=\"loadGoods(1)\"\n        />\n        <el-button \n          type=\"primary\" \n          icon=\"el-icon-search\"\n          @click=\"loadGoods(1)\"\n        >搜索</el-button>\n        <el-button \n          type=\"warning\" \n          icon=\"el-icon-refresh\"\n          @click=\"reset\"\n        >重置</el-button>\n      </div>\n    </el-card>\n\n    <!-- 结果列表 -->\n    <div class=\"search-result\" v-if=\"goodsList.length || name\">\n      <div class=\"result-header\">\n        <h3 class=\"result-title\">\n          <i class=\"el-icon-goods\"></i>\n          搜索结果\n          <span class=\"result-count\" v-if=\"total\">（共 {{ total }} 个商品）</span>\n        </h3>\n      </div>\n\n      <el-row :gutter=\"20\">\n        <el-col\n          v-for=\"g in goodsList\"\n          :key=\"g.id\"\n          :xs=\"12\"\n          :sm=\"8\"\n          :md=\"6\"\n          :lg=\"6\"\n        >\n          <el-card \n            class=\"goods-item\" \n            shadow=\"hover\"\n            @click=\"$router.push(`/front/goodsDetail?id=${g.id}`)\"\n          >\n            <el-image\n              :src=\"g.img\"\n              class=\"goods-img\"\n              fit=\"cover\"\n              :preview-src-list=\"[g.img]\"\n            >\n              <div slot=\"error\" class=\"image-error\">\n                <i class=\"el-icon-picture-outline\"></i>\n              </div>\n            </el-image>\n\n            <div class=\"goods-info\">\n              <p class=\"goods-name line2\">{{ g.name }}</p>\n              <div class=\"goods-meta\">\n                <strong class=\"price\">￥{{ g.price }}</strong>\n                <div class=\"meta-stats\">\n                  <span class=\"meta-item\">\n                    <i class=\"el-icon-view\"></i>\n                    {{ g.readCount }}\n                  </span>\n                  <span class=\"meta-item\">\n                    <i class=\"el-icon-star-off\"></i>\n                    {{ g.likesCount }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n\n      <!-- 空状态 -->\n      <el-empty\n        v-if=\"!goodsList.length && name\"\n        description=\"暂无相关商品\"\n      >\n        <el-button type=\"primary\" @click=\"reset\">重新搜索</el-button>\n      </el-empty>\n\n      <!-- 分页器 -->\n      <el-pagination\n        v-if=\"total\"\n        class=\"pagination\"\n        background\n        layout=\"total, prev, pager, next\"\n        :current-page=\"pageNum\"\n        :page-size=\"pageSize\"\n        :total=\"total\"\n        :page-sizes=\"[8, 16, 24]\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n\n    <!-- 初始状态 -->\n    <div v-else class=\"empty-state\">\n      <i class=\"el-icon-search empty-icon\"></i>\n      <p class=\"empty-text\">输入关键字开始搜索</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Search',\n  data() {\n    return {\n      goodsList: [],\n      pageNum: 1,\n      pageSize: 8,\n      total: 0,\n      name: this.$route.query.name || ''\n    }\n  },\n  created() {\n    this.loadGoods()\n  },\n  watch: {\n    '$route.query.name'(val) {\n      this.name = val || ''\n      this.loadGoods(1)\n    }\n  },\n  methods: {\n    async loadGoods(page = this.pageNum) {\n      this.pageNum = page\n      const { code, data, msg } = await this.$request.get('/goods/selectFrontPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.name\n        }\n      })\n      if (code === '200') {\n        this.goodsList = data.list\n        this.total = data.total\n      } else {\n        this.$message.error(msg)\n      }\n    },\n    handleCurrentChange(page) {\n      this.loadGoods(page)\n    },\n    reset() {\n      this.$router.replace('/front/search')\n      this.name = ''\n      this.loadGoods(1)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.search-page {\n  width: 80%;\n  max-width: 1200px;\n  margin: 30px auto;\n  padding: 0 20px;\n}\n\n/* 搜索卡片 */\n.search-card {\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.search-header {\n  margin-bottom: 20px;\n}\n\n.search-title {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 500;\n  color: #303133;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.search-title i {\n  color: #409EFF;\n  font-size: 24px;\n}\n\n.search-bar {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.search-input {\n  width: 400px;\n}\n\n/* 结果区域 */\n.search-result {\n  margin-top: 30px;\n}\n\n.result-header {\n  margin-bottom: 20px;\n}\n\n.result-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.result-title i {\n  color: #409EFF;\n  font-size: 20px;\n}\n\n.result-count {\n  font-size: 14px;\n  color: #909399;\n  font-weight: normal;\n}\n\n/* 商品卡片 */\n.goods-item {\n  margin-bottom: 20px;\n  cursor: pointer;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.3s ease;\n}\n\n.goods-item:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 6px 16px rgba(0,0,0,0.1);\n}\n\n.goods-img {\n  width: 100%;\n  height: 200px;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n.image-error {\n  width: 100%;\n  height: 100%;\n  background: #f5f7fa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  font-size: 30px;\n}\n\n.goods-info {\n  padding: 12px;\n}\n\n.goods-name {\n  font-size: 15px;\n  color: #303133;\n  margin: 0 0 10px;\n  line-height: 1.5;\n  height: 44px;\n}\n\n.goods-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.price {\n  color: #ff4d4f;\n  font-size: 20px;\n}\n\n.meta-stats {\n  display: flex;\n  gap: 12px;\n}\n\n.meta-item {\n  color: #909399;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.meta-item i {\n  font-size: 14px;\n}\n\n/* 分页器 */\n.pagination {\n  margin-top: 30px;\n  text-align: center;\n}\n\n/* 空状态 */\n.empty-state {\n  text-align: center;\n  padding: 60px 0;\n  color: #909399;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 20px;\n}\n\n.empty-text {\n  font-size: 16px;\n  margin: 0;\n}\n\n/* 响应式调整 */\n@media screen and (max-width: 768px) {\n  .search-page {\n    width: 95%;\n    padding: 0 10px;\n  }\n\n  .search-bar {\n    flex-direction: column;\n  }\n\n  .search-input {\n    width: 100%;\n  }\n\n  .goods-img {\n    height: 160px;\n  }\n\n  .price {\n    font-size: 18px;\n  }\n}\n</style>\n"],"mappings":"AAuHA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAL,IAAA,OAAAM,MAAA,CAAAC,KAAA,CAAAP,IAAA;IACA;EACA;EACAQ,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,KAAA;IACA,mBAAAC,CAAAC,GAAA;MACA,KAAAZ,IAAA,GAAAY,GAAA;MACA,KAAAH,SAAA;IACA;EACA;EACAI,OAAA;IACA,MAAAJ,UAAAK,IAAA,QAAAX,OAAA;MACA,KAAAA,OAAA,GAAAW,IAAA;MACA;QAAAC,IAAA;QAAAd,IAAA;QAAAe;MAAA,eAAAC,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAhB,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAJ,IAAA,OAAAA;QACA;MACA;MACA,IAAAe,IAAA;QACA,KAAAb,SAAA,GAAAD,IAAA,CAAAmB,IAAA;QACA,KAAAf,KAAA,GAAAJ,IAAA,CAAAI,KAAA;MACA;QACA,KAAAgB,QAAA,CAAAC,KAAA,CAAAN,GAAA;MACA;IACA;IACAO,oBAAAT,IAAA;MACA,KAAAL,SAAA,CAAAK,IAAA;IACA;IACAU,MAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;MACA,KAAA1B,IAAA;MACA,KAAAS,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}